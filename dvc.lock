schema: '2.0'
stages:
  prepare:
    cmd: python src/models_training/prepare.py data/salary_for_training/full_data_set.csv  data/salary_for_training/prepared
    deps:
    - path: data/salary_for_training/full_data_set.csv
      md5: cc2880d6e7f69f9d71d7f3243fa73518
      size: 9510913
    - path: src/models_training/prepare.py
      md5: bd5536859714ee3b42ea6fdd9a2d2335
      size: 1358
    params:
      params.yaml:
        prepare.seed: 20170428
        prepare.train_split: 0.8
    outs:
    - path: data/salary_for_training/prepared
      md5: 6473c7a938de647ff441f19d89ab17e7.dir
      size: 12492943
      nfiles: 2
  prepare_fdp:
    cmd: python -m src.models_training.prepare data_dvc/salary/full_data_set.csv  data_dvc/salary/prepared
    deps:
    - path: data_dvc/salary/full_data_set.csv
      md5: cee6342604598030e3ff0f9c14513380
      size: 6437556
    - path: src/models_training/prepare.py
      md5: 0b4e07f1f2cfbea12ca3e9a134dde033
      size: 1499
    params:
      params.yaml:
        prepare.debug: false
        prepare.seed: 42
        prepare.train_split: 0.8
    outs:
    - path: data_dvc/salary/prepared
      md5: c24d3df1459a8d3680c8337ef6037009.dir
      size: 9019287
      nfiles: 2
  featurize_fdp:
    cmd: python -m src.models_training.featurization data_dvc/salary/prepared  data_dvc/salary/features
      featurize_fdp
    deps:
    - path: data_dvc/salary/prepared
      md5: c24d3df1459a8d3680c8337ef6037009.dir
      size: 9019287
      nfiles: 2
    - path: src/augmentation
      md5: 19ad8b9d74d975b123bb3b23ec645830.dir
      size: 8543
      nfiles: 5
    - path: src/models_training/featurization.py
      md5: c3ae75a6d32bf3d1e13c3039e6a931a7
      size: 3024
    - path: src/preprocessing
      md5: 7c7ed783cea07dcdfd03b68f21c8d468.dir
      size: 3284476
      nfiles: 10
    params:
      params.yaml:
        featurize_fdp.data_augmentation: true
    outs:
    - path: data_dvc/salary/features
      md5: df7c4a7b9de7b47eaa75b695cd624c5a.dir
      size: 917075523
      nfiles: 2
  train_fpd:
    cmd: python -m src.models_training.train data/salary_for_training/features fdp.json
      model/fdp
    deps:
    - path: data/salary_for_training/features
      md5: 005cba8c397903b2d0b4a30302ec2f0b.dir
      size: 1125716330
      nfiles: 1
    - path: src/models_training/train.py
      md5: bf5f36a3164f84e7ad5fbb8963fa08d6
      size: 3181
    - path: src/models_training/utils.py
      md5: 4efa540f2e168d86dc08005299021556
      size: 844
    params:
      params.yaml:
        train.n_estimators: 200
        train.n_iter: 100
        train.optimize: true
    outs:
    - path: model/fdp
      md5: c233dc66b513341bae6f6537d8ad37ac.dir
      size: 12166376
      nfiles: 5
  prepare_cni:
    cmd: python -m src.models_training.prepare data_dvc/cni_recto/full_data_set.csv  data_dvc/cni_recto/prepared
    deps:
    - path: data_dvc/cni_recto/full_data_set.csv
      md5: dc555776d6ed00338d5b6818fc7bd36f
      size: 1413091
    - path: src/models_training/prepare.py
      md5: 0b4e07f1f2cfbea12ca3e9a134dde033
      size: 1499
    params:
      params.yaml:
        prepare.debug: false
        prepare.seed: 42
        prepare.train_split: 0.8
    outs:
    - path: data_dvc/cni_recto/prepared
      md5: 23c0ff7c84a61bc02574446ed5353611.dir
      size: 1866552
      nfiles: 2
  featurize_cni:
    cmd: python -m src.models_training.featurization data_dvc/cni_recto/prepared  data_dvc/cni_recto/features
      featurize_cni
    deps:
    - path: data_dvc/cni_recto/prepared
      md5: 23c0ff7c84a61bc02574446ed5353611.dir
      size: 1866552
      nfiles: 2
    - path: src/augmentation
      md5: 19ad8b9d74d975b123bb3b23ec645830.dir
      size: 8543
      nfiles: 5
    - path: src/models_training/featurization.py
      md5: c3ae75a6d32bf3d1e13c3039e6a931a7
      size: 3024
    - path: src/preprocessing
      md5: 7c7ed783cea07dcdfd03b68f21c8d468.dir
      size: 3284476
      nfiles: 10
    params:
      params.yaml:
        featurize_cni.data_augmentation: false
    outs:
    - path: data_dvc/cni_recto/features
      md5: 84763e6b0da6196729e25a2b90d12041.dir
      size: 11075154
      nfiles: 2
  train_fdp:
    cmd: python -m src.models_training.train data_dvc/salary/features data_dvc/salary/scheme.json
      data_dvc/salary/model train_fdp
    deps:
    - path: data_dvc/salary/features
      md5: df7c4a7b9de7b47eaa75b695cd624c5a.dir
      size: 917075523
      nfiles: 2
    - path: data_dvc/salary/scheme.json
      md5: 13c424e30841b81c7745436a75440531
      size: 448
    - path: src/models_training/train.py
      md5: e6e5f3cf690974fc62d64c57b5dc3f82
      size: 3531
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    params:
      params.yaml:
        train_fdp.learning_rate: 0.06
        train_fdp.max_depth: 65
        train_fdp.max_leaf_nodes: 60
        train_fdp.n_estimators: 200
        train_fdp.n_iter: 50
        train_fdp.optimize: false
    outs:
    - path: data_dvc/salary/model
      md5: 9d70a96814e0c776e87ec3b1b026ba30.dir
      size: 6465009
      nfiles: 5
  eval_fdp:
    cmd: python -m src.models_training.eval data_dvc/salary/features data_dvc/salary/scheme.json
      data_dvc/salary/model data_dvc/salary/results
    deps:
    - path: data_dvc/salary/features
      md5: df7c4a7b9de7b47eaa75b695cd624c5a.dir
      size: 917075523
      nfiles: 2
    - path: data_dvc/salary/model
      md5: 9d70a96814e0c776e87ec3b1b026ba30.dir
      size: 6465009
      nfiles: 5
    - path: data_dvc/salary/scheme.json
      md5: 13c424e30841b81c7745436a75440531
      size: 448
    - path: src/models_training/eval.py
      md5: aa714a415f83ba39a955c34790a0131b
      size: 2034
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    outs:
    - path: data_dvc/salary/results/results.json
      md5: c4f2f1c7fc083ea7ebc77fa19ff0b2b1
      size: 196
  train_cni:
    cmd: python -m src.models_training.train data_dvc/cni_recto/features data_dvc/cni_recto/scheme.json
      data_dvc/cni_recto/model train_cni
    deps:
    - path: data_dvc/cni_recto/features
      md5: 84763e6b0da6196729e25a2b90d12041.dir
      size: 11075154
      nfiles: 2
    - path: data_dvc/cni_recto/scheme.json
      md5: fc09dc8b7dbce83baa7b9f52718b94e5
      size: 285
    - path: src/models_training/train.py
      md5: e6e5f3cf690974fc62d64c57b5dc3f82
      size: 3531
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    params:
      params.yaml:
        train_cni.learning_rate: 0.2
        train_cni.max_depth: 3
        train_cni.max_leaf_nodes: 12
        train_cni.n_estimators: 200
        train_cni.n_iter: 50
        train_cni.optimize: false
    outs:
    - path: data_dvc/cni_recto/model
      md5: 5c10f01aec7dbc190f90553b984b920c.dir
      size: 409589
      nfiles: 3
  eval_cni:
    cmd: python -m src.models_training.eval data_dvc/cni_recto/features data_dvc/cni_recto/scheme.json
      data_dvc/cni_recto/model data_dvc/cni_recto/results
    deps:
    - path: data_dvc/cni_recto/features
      md5: 84763e6b0da6196729e25a2b90d12041.dir
      size: 11075154
      nfiles: 2
    - path: data_dvc/cni_recto/model
      md5: 5c10f01aec7dbc190f90553b984b920c.dir
      size: 409589
      nfiles: 3
    - path: data_dvc/cni_recto/scheme.json
      md5: fc09dc8b7dbce83baa7b9f52718b94e5
      size: 285
    - path: src/models_training/eval.py
      md5: aa714a415f83ba39a955c34790a0131b
      size: 2034
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    outs:
    - path: data_dvc/cni_recto/results/results.json
      md5: ddf90a3ede4a746669d18c02d24421c2
      size: 130
  prepare_quittances:
    cmd: python -m src.models_training.prepare data_dvc/rent_receipts/full_data_set.csv  data_dvc/rent_receipts/prepared
    deps:
    - path: data_dvc/rent_receipts/full_data_set.csv
      md5: 17a14ac9d45a01d76ea3ef392b198a9e
      size: 8021166
    - path: src/models_training/prepare.py
      md5: 0b4e07f1f2cfbea12ca3e9a134dde033
      size: 1499
    params:
      params.yaml:
        prepare.debug: false
        prepare.seed: 42
        prepare.train_split: 0.8
    outs:
    - path: data_dvc/rent_receipts/prepared
      md5: 882cc8fd02e58acd56865f091be3a334.dir
      size: 11379526
      nfiles: 2
  featurize_quittances:
    cmd: python -m src.models_training.featurization data_dvc/rent_receipts/prepared  data_dvc/rent_receipts/features
      featurize_quittances
    deps:
    - path: data_dvc/rent_receipts/prepared
      md5: 882cc8fd02e58acd56865f091be3a334.dir
      size: 11379526
      nfiles: 2
    - path: src/augmentation
      md5: 19ad8b9d74d975b123bb3b23ec645830.dir
      size: 8543
      nfiles: 5
    - path: src/models_training/featurization.py
      md5: c3ae75a6d32bf3d1e13c3039e6a931a7
      size: 3024
    - path: src/preprocessing
      md5: 7c7ed783cea07dcdfd03b68f21c8d468.dir
      size: 3284476
      nfiles: 10
    params:
      params.yaml:
        featurize_quittances.data_augmentation: false
    outs:
    - path: data_dvc/rent_receipts/features
      md5: e448d030deb625291aa20b9b5f88fcc3.dir
      size: 179107018
      nfiles: 2
  train_quittances:
    cmd: python -m src.models_training.train data_dvc/rent_receipts/features data_dvc/rent_receipts/scheme.json
      data_dvc/rent_receipts/model train_quittances
    deps:
    - path: data_dvc/rent_receipts/features
      md5: e448d030deb625291aa20b9b5f88fcc3.dir
      size: 179107018
      nfiles: 2
    - path: data_dvc/rent_receipts/scheme.json
      md5: 2f77f9d2d067a43e365de5f4fc9bf804
      size: 575
    - path: src/models_training/train.py
      md5: e6e5f3cf690974fc62d64c57b5dc3f82
      size: 3531
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    params:
      params.yaml:
        train_quittances.learning_rate: 0.2
        train_quittances.max_depth: 3
        train_quittances.max_leaf_nodes: 12
        train_quittances.n_estimators: 200
        train_quittances.n_iter: 50
        train_quittances.optimize: false
    outs:
    - path: data_dvc/rent_receipts/model
      md5: 6cf4864b19f7be43949b9ebcf908efc5.dir
      size: 1420874
      nfiles: 6
  eval_quittances:
    cmd: python -m src.models_training.eval data_dvc/rent_receipts/features data_dvc/rent_receipts/scheme.json
      data_dvc/rent_receipts/model data_dvc/rent_receipts/results
    deps:
    - path: data_dvc/rent_receipts/features
      md5: e448d030deb625291aa20b9b5f88fcc3.dir
      size: 179107018
      nfiles: 2
    - path: data_dvc/rent_receipts/model
      md5: 6cf4864b19f7be43949b9ebcf908efc5.dir
      size: 1420874
      nfiles: 6
    - path: data_dvc/rent_receipts/scheme.json
      md5: 2f77f9d2d067a43e365de5f4fc9bf804
      size: 575
    - path: src/models_training/eval.py
      md5: aa714a415f83ba39a955c34790a0131b
      size: 2034
    - path: src/models_training/utils.py
      md5: 84f6f9b5912986052a50cfbdf6f400ea
      size: 1827
    outs:
    - path: data_dvc/rent_receipts/results/results.json
      md5: b2a6adb9b0719f4f70e9a707b8071065
      size: 276
